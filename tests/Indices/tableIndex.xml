<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<siardDiark xmlns="http://www.sa.dk/xmlns/diark/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sa.dk/xmlns/diark/1.0 ../Schemas/standard/tableIndex.xsd">
	<version>1.0</version>
	<dbName>kildejournalsystem</dbName>
	<databaseProduct>MariaDB</databaseProduct>
	<tables>
		<table>
			<name>av_kodetabel_lagringsform</name>
			<folder>table1</folder>
			<description>Tabel der oversætter koderne for lagringsform</description>
			<columns>
				<column>
					<name>lagringsform</name>
					<columnID>c1</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Kode for lagringsform (primærnøgle)</description>
				</column>
				<column>
					<name>beskrivelse</name>
					<columnID>c2</columnID>
					<type>CHARACTER VARYING(26)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>false</nullable>
					<description>Beskrivende tekst</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_av_kodetabel_lagringsform</name>
				<column>lagringsform</column>
			</primaryKey>
			<rows>3</rows>
		</table>
		<table>
			<name>dokumenter</name>
			<folder>table2</folder>
			<description>Tabel der indeholder oplysninger om dokumenter</description>
			<columns>
				<column>
					<name>dokumentId</name>
					<columnID>c1</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>true</nullable>
					<description>Entydigt ID for dokumentet i arkiveringsversionen</description>
					<functionalDescription>Dokumentidentifikation</functionalDescription>
				</column>
				<column>
					<name>dato</name>
					<columnID>c2</columnID>
					<type>DATE</type>
					<typeOriginal>DATE</typeOriginal>
					<nullable>true</nullable>
					<description>Dato dokumentet blev oprettet</description>
					<functionalDescription>Dokumentdato</functionalDescription>
				</column>
				<column>
					<name>dokumenttitel</name>
					<columnID>c3</columnID>
					<type>CHARACTER VARYING(80)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>true</nullable>
					<description>Dokumentets titel i driftssystemet</description>
					<functionalDescription>Dokumenttitel</functionalDescription>
				</column>
				<column>
					<name>lagringsform</name>
					<columnID>c4</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>true</nullable>
					<description>Angiver dokumentets lagringsform, jf. bek. 1007, bilag 6, figur 6.5</description>
					<functionalDescription>Lagringsform</functionalDescription>
				</column>
				<column>
					<name>id</name>
					<columnID>c5</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Entydigt ikke-betydningsbærende ID (primærnøgle)</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_dokumenter</name>
				<column>id</column>
			</primaryKey>
			<foreignKeys>
				<foreignKey>
					<name>FK_dokumenter_av_kodetabel_lagringsform</name>
					<referencedTable>av_kodetabel_lagringsform</referencedTable>
					<reference>
						<column>lagringsform</column>
						<referenced>lagringsform</referenced>
					</reference>
				</foreignKey>
			</foreignKeys>
			<rows>15</rows>
		</table>
		<table>
			<name>emneord</name>
			<folder>table3</folder>
			<description>Tabel der indeholder beskrivelser af emneordskoder</description>
			<columns>
				<column>
					<name>emneordskode</name>
					<columnID>c1</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Emneordskode (primærnøgle)</description>
				</column>
				<column>
					<name>emneord</name>
					<columnID>c2</columnID>
					<type>CHARACTER VARYING(50)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<defaultValue>0</defaultValue>
					<nullable>true</nullable>
					<description>Emneord</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_emneord</name>
				<column>emneordskode</column>
			</primaryKey>
			<rows>13</rows>
		</table>
		<table>
			<name>sager</name>
			<folder>table4</folder>
			<description>Tabel der indeholder oplysninger om sager</description>
			<columns>
				<column>
					<name>sagsnummer</name>
					<columnID>c1</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Entydigt ID der identificerer sagen</description>
					<functionalDescription>Sagsidentifikation</functionalDescription>
				</column>
				<column>
					<name>dato</name>
					<columnID>c2</columnID>
					<type>TIMESTAMP</type>
					<typeOriginal>TIMESTAMP</typeOriginal>
					<nullable>true</nullable>
					<description>Dato for oprettelse af sagen i driftssystemet</description>
				</column>
				<column>
					<name>sagstitel</name>
					<columnID>c3</columnID>
					<type>CHARACTER VARYING(60)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>true</nullable>
					<description>Titel på sagen i driftssystemet</description>
					<functionalDescription>Sagstitel</functionalDescription>
				</column>
				<column>
					<name>sagsbehandlerId</name>
					<columnID>c4</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>ID på den sagbehandler der har oprettet sagen</description>
				</column>
				<column>
					<name>sagsbehandlerIni</name>
					<columnID>c5</columnID>
					<type>CHARACTER VARYING(4)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>false</nullable>
					<description>Initialer på den sagsbehandler der har oprettet sagen</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_sager</name>
				<column>sagsnummer</column>
			</primaryKey>
			<foreignKeys>
				<foreignKey>
					<name>FK_sager_sagsbehandlere</name>
					<referencedTable>sagsbehandlere</referencedTable>
					<reference>
						<column>sagsbehandlerId</column>
						<referenced>sagsbehandlerId</referenced>
					</reference>
					<reference>
						<column>sagsbehandlerIni</column>
						<referenced>initialer</referenced>
					</reference>
				</foreignKey>
			</foreignKeys>
			<rows>7</rows>
		</table>
		<table>
			<name>sager_dokumenter</name>
			<folder>table5</folder>
			<description>Mellemtabel der skaber relation mellem "sager" og "dokumenter"</description>
			<columns>
				<column>
					<name>sagsnummer</name>
					<columnID>c1</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Sagsnummer (fremmednøgle til tabellen "sager")</description>
				</column>
				<column>
					<name>dokId</name>
					<columnID>c2</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>ID (fremmednøgle til tabellen "dokumenter")</description>
				</column>
				<column>
					<name>id</name>
					<columnID>c3</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Entydigt ikke-betydningsbærende ID (primærnøgle)</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_sager_dokumenter</name>
				<column>id</column>
			</primaryKey>
			<foreignKeys>
				<foreignKey>
					<name>FK_sager_dokumenter_dokumenter</name>
					<referencedTable>dokumenter</referencedTable>
					<reference>
						<column>dokId</column>
						<referenced>id</referenced>
					</reference>
				</foreignKey>
				<foreignKey>
					<name>FK_sager_dokumenter_sager</name>
					<referencedTable>sager</referencedTable>
					<reference>
						<column>sagsnummer</column>
						<referenced>sagsnummer</referenced>
					</reference>
				</foreignKey>
			</foreignKeys>
			<rows>15</rows>
		</table>
		<table>
			<name>sager_emneord</name>
			<folder>table6</folder>
			<description>Mellemtabel der skaber relation mellem "sager" og "emneord"</description>
			<columns>
				<column>
					<name>emneordskode</name>
					<columnID>c1</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Emneordskode (fremmednøgle til tabellen "emneord")</description>
				</column>
				<column>
					<name>sagnummer</name>
					<columnID>c2</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Sagsnummer (fremmednøgle til tabellen "sager")</description>
				</column>
				<column>
					<name>id</name>
					<columnID>c3</columnID>
					<type>INTEGER</type>
					<typeOriginal>INT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Entydigt ikke-betydningsbærende ID (primærnøgle)</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_sager_emneord</name>
				<column>id</column>
			</primaryKey>
			<foreignKeys>
				<foreignKey>
					<name>FK_sager_emneord_emneord</name>
					<referencedTable>emneord</referencedTable>
					<reference>
						<column>emneordskode</column>
						<referenced>emneordskode</referenced>
					</reference>
				</foreignKey>
				<foreignKey>
					<name>FK_sager_emneord_sager</name>
					<referencedTable>sager</referencedTable>
					<reference>
						<column>sagnummer</column>
						<referenced>sagsnummer</referenced>
					</reference>
				</foreignKey>
			</foreignKeys>
			<rows>13</rows>
		</table>
		<table>
			<name>sagsbehandlere</name>
			<folder>table7</folder>
			<description>Tabel der indeholder oplysninger om sagsbehandlere</description>
			<columns>
				<column>
					<name>sagsbehandlerId</name>
					<columnID>c1</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>false</nullable>
					<description>Entydigt ID for sagsbehandleren (primærnøgle)</description>
				</column>
				<column>
					<name>navn</name>
					<columnID>c2</columnID>
					<type>CHARACTER VARYING(25)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>false</nullable>
					<description>Sagsbehandlerens navn</description>
				</column>
				<column>
					<name>initialer</name>
					<columnID>c3</columnID>
					<type>CHARACTER VARYING(4)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>false</nullable>
					<description>Sagsbehandlerens initialer</description>
				</column>
				<column>
					<name>kontor</name>
					<columnID>c4</columnID>
					<type>SMALLINT</type>
					<typeOriginal>TINYINT UNSIGNED</typeOriginal>
					<nullable>true</nullable>
					<description>Det kontor, sagsbehandleren er tilknyttet</description>
				</column>
				<column>
					<name>telefon</name>
					<columnID>c5</columnID>
					<type>CHARACTER VARYING(10)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>true</nullable>
					<description>Sagsbehandlerens telefonnummer</description>
				</column>
				<column>
					<name>epost</name>
					<columnID>c6</columnID>
					<type>CHARACTER VARYING(40)</type>
					<typeOriginal>VARCHAR</typeOriginal>
					<nullable>true</nullable>
					<description>Sagsbehandlerens e-postadresse</description>
				</column>
			</columns>
			<primaryKey>
				<name>PK_sagsbehandlere</name>
				<column>initialer</column>
				<column>sagsbehandlerId</column>
			</primaryKey>
			<rows>7</rows>
		</table>
	</tables>
	<views>
		<view>
			<name>AV_Sag_Dokument_Test</name>
			<queryOriginal>
			SELECT
				sager.sagsnummer AS SagNr,
				sager.dato AS SagsDato,
				sager.sagstitel AS SagsTitel,
				dokumenter.id AS DokNr,
				dokumenter.dato AS DokDato,
				dokumenter.dokumenttitel AS DokTitel,
				dokumenter.dokumentid AS DokumentID,
				dokumenter.dato AS DigitalDokdato,
				dokumenter.dokumenttitel AS DigitalDokTitel
			FROM
				sager
			INNER JOIN sager_dokumenter
				ON sager.sagsnummer = sager_dokumenter.sagsnummer
			INNER JOIN dokumenter
				ON sager_dokumenter.dokid = dokumenter.id
			WHERE dokumenter.lagringsform = 1
				AND dokumenter.dokumentId IS NOT NULL
				AND sager.sagsnummer like '1014'
				--AND dokumenter.dokumentId NOT LIKE '99999991'
				--AND dokumenter.dokumentId NOT LIKE '99999992'
			</queryOriginal>
			<description>SQL-forespørgsel der finder alle dokumenter tilknyttet et sagsnummer</description>
		</view>
		<view>
			<name>AV_Find_Sag</name>
			<queryOriginal>
				SELECT
					*
				FROM
					sager
				WHERE sager.sagstitel LIKE '%kilde%'
			</queryOriginal>
			<description>SQL-forespørgsel der finder en eller flere sager ud fra titel</description>
		</view>
		<view>
			<name>AV_Sager_Sagsbehandler</name>
			<queryOriginal>
				SELECT
					*
				FROM
					sager
				INNER JOIN sagsbehandlere
					ON sager.sagsbehandlerIni = sagsbehandlere.initialer
				WHERE sagsbehandlere.navn LIKE '%Linus%'
			</queryOriginal>
			<description>SQL-forespørgsel der finder alle sager der er oprettet af en bestemt sagsbehandler</description>
		</view>
		<view>
			<name>AV_Find_Dokument</name>
			<queryOriginal>
				SELECT
					*
				FROM
					dokumenter
				WHERE dokumenter.dokumenttitel LIKE '%Stallman%'
			</queryOriginal>
			<description>SQL-forespørgsel der finder et eller flere dokumenter ud fra titel</description>
		</view>
	</views>
</siardDiark>
